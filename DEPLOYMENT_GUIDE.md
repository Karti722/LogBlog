# üöÄ LogBlog Deployment Guide - ML-Based Tutorial Generation

## üìã Table of Contents
1. [Prerequisites](#prerequisites)
2. [Local Development Setup](#local-development-setup)
3. [Production Deployment on Render](#production-deployment-on-render)
4. [Environment Variables](#environment-variables)
5. [Database Configuration](#database-configuration)
6. [Static Files](#static-files)
7. [Health Checks](#health-checks)
8. [Troubleshooting](#troubleshooting)

## üõ†Ô∏è Prerequisites

### For Local Development:
- Python 3.8+ (3.12 recommended)
- Node.js 18+
- npm or yarn
- Git

### For Production:
- Render account
- GitHub repository
- PostgreSQL database (provided by Render)

## üè† Local Development Setup

### 1. Clone and Setup Backend

```bash
# Clone the repository
git clone <your-repo-url>
cd LogBlog

# Create virtual environment
python -m venv logenv
source logenv/bin/activate  # On Windows: logenv\Scripts\activate

# Install backend dependencies
cd backend
pip install -r requirements.txt

# Create .env file
cp .env.example .env
# Edit .env with your local settings
```

### 2. Setup Database and ML Models

```bash
# Run migrations
python manage.py migrate

# Create superuser
python manage.py createsuperuser

# Train ML models
python manage.py train_ml_models
```

### 3. Setup Frontend

```bash
# Install frontend dependencies
cd ../frontend
npm install

# Start development server
npm run dev
```

### 4. Start Development Servers

```bash
# Backend (in one terminal)
cd backend
python manage.py runserver

# Frontend (in another terminal)
cd frontend
npm run dev
```

## üåê Production Deployment on Render

### 1. Prepare Repository

Ensure your repository has:
- `render.yaml` - Render configuration
- `build.sh` - Build script
- `requirements.txt` - Python dependencies
- `.env.example` - Environment template

### 2. Connect to Render

1. Go to [Render Dashboard](https://dashboard.render.com)
2. Click "New" ‚Üí "Blueprint"
3. Connect your GitHub repository
4. Select the repository containing your LogBlog project

### 3. Configure Environment Variables

In Render dashboard, set these environment variables:

```bash
# Required Production Variables
SECRET_KEY=<auto-generated-by-render>
DEBUG=False
DATABASE_URL=<auto-provided-by-render>
FRONTEND_URL=https://your-app-name.onrender.com
ALLOWED_HOSTS=your-app-name.onrender.com,localhost,127.0.0.1

# ML Configuration
USE_ML_GENERATOR=True
ML_MODEL_PATH=backend/ai_tutorial/models/
ML_DEVICE=cpu

# Optional Performance Settings
WEB_CONCURRENCY=4
GUNICORN_TIMEOUT=120
```

### 4. Database Setup

The PostgreSQL database is automatically created via `render.yaml`. After deployment:

```bash
# Access your app's shell
render shell your-service-name

# Run migrations
python manage.py migrate

# Create superuser
python manage.py createsuperuser
```

## üîß Environment Variables

### Development (.env)
```bash
# Django Settings
SECRET_KEY=your-secret-key-here
DEBUG=True
ALLOWED_HOSTS=localhost,127.0.0.1

# Database (SQLite for development)
DATABASE_URL=sqlite:///db.sqlite3

# ML Configuration
USE_ML_GENERATOR=True
ML_MODEL_PATH=backend/ai_tutorial/models/
ML_DEVICE=auto

# Frontend
FRONTEND_URL=http://localhost:5174
```

### Production (Render Environment)
```bash
# Django Settings
SECRET_KEY=<auto-generated>
DEBUG=False
ALLOWED_HOSTS=your-app.onrender.com,localhost,127.0.0.1

# Database (PostgreSQL)
DATABASE_URL=<auto-provided>

# ML Configuration
USE_ML_GENERATOR=True
ML_MODEL_PATH=backend/ai_tutorial/models/
ML_DEVICE=cpu

# Frontend
FRONTEND_URL=https://your-app.onrender.com
```

## üóÑÔ∏è Database Configuration

### Local Development
- Uses SQLite by default
- Database file: `backend/db.sqlite3`
- No additional setup required

### Production
- Uses PostgreSQL (configured in render.yaml)
- Automatic backups included
- Connection pooling enabled

## üìÅ Static Files

### Development
- Static files served by Django development server
- Location: `backend/staticfiles/`

### Production
- Static files served by WhiteNoise
- Collected during build process
- Frontend build files copied to Django static directory

## üè• Health Checks

The application includes health check endpoints:

```bash
# Health check endpoint
GET /health/

# Response
{
  "status": "healthy",
  "timestamp": "2025-07-07T16:00:00Z",
  "services": {
    "database": "healthy",
    "ml_models": "healthy"
  }
}
```

## üîç Troubleshooting

### Common Issues

#### 1. ML Models Not Found
```bash
# Check if models exist
ls -la backend/ai_tutorial/models/

# Retrain models
python manage.py train_ml_models --force
```

#### 2. Static Files Not Loading
```bash
# Collect static files
python manage.py collectstatic --noinput

# Check WhiteNoise configuration in settings.py
```

#### 3. Database Connection Issues
```bash
# Check database URL
echo $DATABASE_URL

# Test connection
python manage.py dbshell
```

#### 4. Memory Issues on Render
```bash
# Reduce ML model complexity
# Set ML_DEVICE=cpu
# Increase Render instance size
```

### Debug Commands

```bash
# Check system status
python manage.py check --deploy

# View logs
render logs your-service-name

# Access shell
render shell your-service-name
```

## üìä Performance Optimization

### ML Model Optimization
- Models trained with CPU-optimized settings
- Lightweight sentence transformers
- Efficient template matching

### Database Optimization
- Connection pooling enabled
- Proper indexing on models
- Query optimization

### Frontend Optimization
- Vite build optimization
- Code splitting enabled
- Static asset compression

## üîí Security Features

### Production Security
- HTTPS enforcement
- HSTS headers
- Secure cookie settings
- CSRF protection
- XSS protection

### Environment Security
- Environment variable validation
- Secret key generation
- Database URL protection

## üìà Monitoring

### Health Monitoring
- Built-in health checks
- Database connectivity monitoring
- ML model availability checks

### Error Tracking
- Comprehensive logging
- Error handling
- Performance monitoring

## üöÄ Deployment Checklist

Before deploying:
- [ ] Update `render.yaml` with correct service names
- [ ] Set all required environment variables
- [ ] Test ML models locally
- [ ] Verify static files collection
- [ ] Check database migrations
- [ ] Test health check endpoints
- [ ] Review security settings

## üìû Support

For deployment issues:
1. Check the troubleshooting section
2. Review Render logs
3. Test locally first
4. Check environment variables
5. Verify ML models are trained

---

**Status**: ‚úÖ Ready for Production Deployment
**Last Updated**: July 7, 2025
**ML System**: PyTorch + scikit-learn based tutorial generation

## üìã Prerequisites

### Local Development
- Python 3.8+
- Node.js 16+
- npm/yarn
- Git

### Production (Render)
- GitHub repository
- Render account
- PostgreSQL database (provided by Render)

## üîß Local Development Setup

### 1. Clone and Setup
```bash
git clone <your-repo-url>
cd LogBlog
```

### 2. Backend Setup
```bash
# Create virtual environment
python -m venv logenv

# Activate virtual environment
# Windows:
logenv\Scripts\activate
# macOS/Linux:
source logenv/bin/activate

# Install dependencies
cd backend
pip install -r requirements.txt

# Setup environment variables
cp .env.example .env
# Edit .env with your local settings

# Run migrations
python manage.py migrate

# Train ML models
python manage.py train_ml_models

# Create superuser
python manage.py createsuperuser
```

### 3. Frontend Setup
```bash
cd ../frontend
npm install
npm run dev
```

### 4. Start Development Servers
```bash
# Terminal 1 - Backend
cd backend
python manage.py runserver

# Terminal 2 - Frontend  
cd frontend
npm run dev
```

## üåê Production Deployment on Render

### 1. Prepare Your Repository
Ensure your repository contains:
- ‚úÖ `render.yaml` (deployment configuration)
- ‚úÖ `build.sh` (build script)
- ‚úÖ `requirements.txt` (Python dependencies)
- ‚úÖ ML models training command
- ‚úÖ Static files configuration

### 2. Create Render Services

#### A. Create Database
1. Go to Render Dashboard
2. Click "New" ‚Üí "PostgreSQL"
3. Name: `logblog-database`
4. Database Name: `logblog_db`
5. User: `logblog_user`
6. Copy the DATABASE_URL for later

#### B. Create Web Service
1. Go to Render Dashboard
2. Click "New" ‚Üí "Web Service"
3. Connect your GitHub repository
4. Settings:
   - **Name**: `logblog-app`
   - **Environment**: `Python`
   - **Build Command**: `./build.sh`
   - **Start Command**: `cd backend && gunicorn backend.wsgi:application --bind 0.0.0.0:$PORT`

### 3. Configure Environment Variables

Add these environment variables in Render Dashboard:

```bash
# Required
SECRET_KEY=your-super-secure-production-key-at-least-50-characters-long
DEBUG=False
DATABASE_URL=postgresql://logblog_user:password@dpg-xxxxx-a.oregon-postgres.render.com/logblog_db

# ML Configuration
USE_ML_GENERATOR=True
ML_MODEL_PATH=backend/ai_tutorial/models/
ML_DEVICE=cpu

# Application Settings
FRONTEND_URL=https://your-app-name.onrender.com
ALLOWED_HOSTS=your-app-name.onrender.com,localhost,127.0.0.1
```

### 4. Deploy
1. Click "Create Web Service"
2. Render will automatically:
   - Clone your repository
   - Install dependencies
   - Train ML models
   - Build frontend
   - Collect static files
   - Run migrations
   - Start the application

## üîç Deployment Checklist

### Pre-deployment
- [ ] All environment variables set
- [ ] Database created and connected
- [ ] ML models can be trained
- [ ] Static files configuration working
- [ ] CORS settings configured
- [ ] Security settings enabled

### Post-deployment
- [ ] Application loads successfully
- [ ] Database migrations completed
- [ ] ML models trained and available
- [ ] Static files serving correctly
- [ ] API endpoints working
- [ ] Frontend-backend communication working
- [ ] Tutorial generation working

## üõ†Ô∏è Build Process

The build process includes:

1. **Install Dependencies**: Python packages from requirements.txt
2. **Train ML Models**: PyTorch + scikit-learn models for tutorial generation
3. **Collect Static Files**: Django static files
4. **Run Migrations**: Database schema setup
5. **Build Frontend**: React application compilation
6. **Copy Assets**: Frontend build to Django static files

## üìä Key Features

### ‚úÖ Production Ready
- ML-based tutorial generation (no API keys needed)
- Secure authentication system
- Scalable database design
- Static file serving
- CORS configuration
- Security headers
- Logging system

### ‚úÖ Local Development
- Hot reload for development
- SQLite database fallback
- Debug mode support
- Development server configuration

## üö® Troubleshooting

### Common Issues

1. **Build Fails on Render**
   - Check build logs for specific errors
   - Verify all dependencies in requirements.txt
   - Ensure build.sh has correct permissions

2. **ML Models Not Training**
   - Check available memory on Render
   - Verify ML_DEVICE=cpu for production
   - Check model file permissions

3. **Static Files Not Loading**
   - Verify STATICFILES_STORAGE setting
   - Check whitenoise configuration
   - Ensure collectstatic runs in build

4. **Database Connection Issues**
   - Verify DATABASE_URL format
   - Check PostgreSQL service status
   - Confirm database user permissions

## üìû Support

For issues:
1. Check Render logs
2. Review Django logs
3. Verify environment variables
4. Check ML model training logs

## üéâ Success!

Once deployed, your LogBlog application will be available at:
`https://your-app-name.onrender.com`

Features:
- ‚úÖ ML-based tutorial generation
- ‚úÖ User authentication
- ‚úÖ Blog management
- ‚úÖ Responsive frontend
- ‚úÖ API endpoints
- ‚úÖ Admin interface

Your LogBlog is now ready for production use! üöÄ
